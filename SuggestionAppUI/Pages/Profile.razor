@page "/profile"
@attribute [Authorize]

<div>
    <div><button @onclick="ClosePage">Close</button></div>
</div>

<div>
    <h2>My Account</h2>
    <p><a href="MicrosoftIdentity/Account/EditProfile">Edit My Profile</a></p>
</div>

@* approved *@
@if(_approved?.Count > 0)
{
    <div>
        <h2>Approved Suggestions</h2>
        <p>These are your suggestions that are currently active.</p>
        @foreach (var s in _approved)
        {
            <hr />
            <div>@s.Suggestion</div>
            <p>@s.DateCreated.ToString("dd-MM-yyyy")</p>
            <p>Total Votes: @s.UserVotes.Count</p>
            <p>@s.Category.CategoryName</p>
            <p>@s.Description</p>

            @if (s.SuggestionStatus is not null)
            {
                <div>@s.SuggestionStatus.StatusName</div>
                <p>@((MarkupString)s.OwnerNotes)</p>
            }
        }
    </div>
}

@* Archived *@
@if (_archived?.Count > 0)
{
    <div>
        <h2>Archived Suggestions</h2>
        <p>These are your suggestions that were active but did not gain enough traction.</p>
        @foreach (var s in _archived)
        {
            <hr />
            <div>@s.Suggestion</div>
            <p>@s.DateCreated.ToString("dd-MM-yyyy")</p>
            <p>Total Votes: @s.UserVotes.Count</p>
            <p>@s.Category.CategoryName</p>
            <p>@s.Description</p>

            @if (s.SuggestionStatus is not null)
            {
                <div>@s.SuggestionStatus.StatusName</div>
                <p>@((MarkupString)s.OwnerNotes)</p>
            }
        }
    </div>
}

@* pending *@
@if (_pending?.Count > 0)
{
    <div>
        <h2>Pending Suggestions</h2>
        <p>These are your suggestions that have not yet been reviewed by the administrators.</p>
        @foreach (var s in _pending)
        {
            <hr />
            <div>@s.Suggestion</div>
            <p>@s.DateCreated.ToString("dd-MM-yyyy")</p>
            <p>Total Votes: @s.UserVotes.Count</p>
            <p>@s.Category.CategoryName</p>
            <p>@s.Description</p>

            @if (s.SuggestionStatus is not null)
            {
                <div>@s.SuggestionStatus.StatusName</div>
                <p>@((MarkupString)s.OwnerNotes)</p>
            }
        }
    </div>
}

@* rejected *@
@if (_rejected?.Count > 0)
{
    <div>
        <h2>Rejected Suggestions</h2>
        <p>These are your suggestions that were not deemed to be appropriate for the taining suggestion data.</p>
        @foreach (var s in _rejected)
        {
            <hr />
            <div>@s.Suggestion</div>
            <p>@s.DateCreated.ToString("dd-MM-yyyy")</p>
            <p>Total Votes: @s.UserVotes.Count</p>
            <p>@s.Category.CategoryName</p>
            <p>@s.Description</p>

            @if (s.SuggestionStatus is not null)
            {
                <div>@s.SuggestionStatus.StatusName</div>
                <p>@((MarkupString)s.OwnerNotes)</p>
            }
        }
    </div>
}

